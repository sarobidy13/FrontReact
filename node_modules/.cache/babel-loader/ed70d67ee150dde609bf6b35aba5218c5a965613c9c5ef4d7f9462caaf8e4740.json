{"ast":null,"code":"// import React, { useState, useEffect } from 'react';\n// import Field from './Field';\n\n// const Login = () => {\n//     const token = sessionStorage.getItem(\"token\");\n\n//     if (token) {\n//          window.location.href = \"/\";\n//     }   \n\n//     const [email, setEmail] = useState('admin@gmail.com');\n//     const [password, setPassword] = useState('000');\n//     const [redirect, setRedirect] = useState(false);\n//     useEffect(() => {\n//         if (redirect) {\n//             console.log(\"makato\");\n//             setRedirect(false);\n//             window.location.href = '/home';\n//         }\n//     }, [redirect]);\n\n//     const handleSubmit = async (e) => {\n//         e.preventDefault();\n//         const data = new FormData();\n//         data.append('email', email);\n//         data.append('mdp', password);\n\n//         const utilisateurs = {\n//             \"email\":email,\n//             \"mdp\":password\n//         }\n//         console.log(JSON.stringify(utilisateurs));\n//         console.log(\"mail  \"+email+\"  pass: \"+password);\n\n//         try {\n//             const response = await fetch('https://e-vehicule-production-c2e4.up.railway.app/utilisateurs/login', {\n//                 headers: {\n//                     'Content-Type': 'application/json',\n//                 },\n//                 method: 'POST',\n//                 body: JSON.stringify(utilisateurs)\n//             });\n//             const responseData = await response.json();\n//             console.log(JSON.stringify(responseData));\n//             if (response.ok) {\n//                 sessionStorage.setItem('token', responseData.data);\n//                 var token = sessionStorage.getItem('token');\n//                 console.log(\"Ry lanitra oh\" );\n//                 console.log(\"tokenina  \"+token);\n//                 console.log(token);\n//                 setRedirect(true);\n//             } else {\n//                 console.log(responseData.message);\n//                 alert(\"hello christooooooooj \"+responseData.message);\n//             }\n//         } catch (error) {\n//             console.error('Erreur pendant la requête:', error);\n//             alert('Une erreur s\\'est produite.');\n//         }\n//     };\n\n//     return (\n//         <div className=\"container mt-5\">\n//             <h2 className=\"mb-4\">Connexion</h2>\n//             <form onSubmit={handleSubmit}>\n//                 <Field libelle=\"Email\" type=\"email\" onChange={(e) => setEmail(e.target.value)} value={email} />\n//                 <Field libelle=\"Password\" type=\"password\" onChange={(e) => setPassword(e.target.value)} value={password} />\n//                 <button type=\"submit\" className=\"btn btn-primary\">\n//                     Se connecter\n//                 </button>\n//             </form>\n//         </div>\n//     );\n// };\n\n// export default Login;","map":{"version":3,"names":[],"sources":["D:/S5/Mr Rojo/FrontReact/src/components/Login.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\r\n// import Field from './Field';\r\n\r\n// const Login = () => {\r\n//     const token = sessionStorage.getItem(\"token\");\r\n                                                                    \r\n//     if (token) {\r\n//          window.location.href = \"/\";\r\n//     }   \r\n\r\n     \r\n//     const [email, setEmail] = useState('admin@gmail.com');\r\n//     const [password, setPassword] = useState('000');\r\n//     const [redirect, setRedirect] = useState(false);\r\n//     useEffect(() => {\r\n//         if (redirect) {\r\n//             console.log(\"makato\");\r\n//             setRedirect(false);\r\n//             window.location.href = '/home';\r\n//         }\r\n//     }, [redirect]);\r\n\r\n//     const handleSubmit = async (e) => {\r\n//         e.preventDefault();\r\n//         const data = new FormData();\r\n//         data.append('email', email);\r\n//         data.append('mdp', password);\r\n\r\n//         const utilisateurs = {\r\n//             \"email\":email,\r\n//             \"mdp\":password\r\n//         }\r\n//         console.log(JSON.stringify(utilisateurs));\r\n//         console.log(\"mail  \"+email+\"  pass: \"+password);\r\n\r\n\r\n//         try {\r\n//             const response = await fetch('https://e-vehicule-production-c2e4.up.railway.app/utilisateurs/login', {\r\n//                 headers: {\r\n//                     'Content-Type': 'application/json',\r\n//                 },\r\n//                 method: 'POST',\r\n//                 body: JSON.stringify(utilisateurs)\r\n//             });\r\n//             const responseData = await response.json();\r\n//             console.log(JSON.stringify(responseData));\r\n//             if (response.ok) {\r\n//                 sessionStorage.setItem('token', responseData.data);\r\n//                 var token = sessionStorage.getItem('token');\r\n//                 console.log(\"Ry lanitra oh\" );\r\n//                 console.log(\"tokenina  \"+token);\r\n//                 console.log(token);\r\n//                 setRedirect(true);\r\n//             } else {\r\n//                 console.log(responseData.message);\r\n//                 alert(\"hello christooooooooj \"+responseData.message);\r\n//             }\r\n//         } catch (error) {\r\n//             console.error('Erreur pendant la requête:', error);\r\n//             alert('Une erreur s\\'est produite.');\r\n//         }\r\n//     };\r\n\r\n//     return (\r\n//         <div className=\"container mt-5\">\r\n//             <h2 className=\"mb-4\">Connexion</h2>\r\n//             <form onSubmit={handleSubmit}>\r\n//                 <Field libelle=\"Email\" type=\"email\" onChange={(e) => setEmail(e.target.value)} value={email} />\r\n//                 <Field libelle=\"Password\" type=\"password\" onChange={(e) => setPassword(e.target.value)} value={password} />\r\n//                 <button type=\"submit\" className=\"btn btn-primary\">\r\n//                     Se connecter\r\n//                 </button>\r\n//             </form>\r\n//         </div>\r\n//     );\r\n// };\r\n\r\n// export default Login;\r\n"],"mappings":"AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}